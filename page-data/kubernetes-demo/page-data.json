{"componentChunkName":"component---src-templates-post-jsx","path":"/kubernetes-demo/","result":{"data":{"site":{"siteMetadata":{"title":"gyuwseong"}},"markdownRemark":{"id":"01847e81-6882-5ff3-adde-2106c08e04e8","excerpt":"미니큐브 미니큐브(Minikube) 는 로, 가상 머신을 통해 쿠버네티스를 로컬에서 임의로 실행하여 쿠버네티스를 배울 수 있다. 실무에서 쿠버네티스를 사용하면 보통 여러개의 마스터 프로세스와 노드 프로세스가 여러개의 노드에서 실행되는 클러스터를 구성하게 되는데, 이를 로컬에서 세팅하고 테스트하기는 다소 부담스럽다. 미니큐브는 마스터 프로세스와 노드 프로세…","html":"<h2 id=\"미니큐브\" style=\"position:relative;\"><a href=\"#%EB%AF%B8%EB%8B%88%ED%81%90%EB%B8%8C\" aria-label=\"미니큐브 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a><strong>미니큐브</strong></h2>\n<p>미니큐브(Minikube) 는 <code class=\"language-text\">로컬에서 실행 가능한 쿠버네티스</code>로, 가상 머신을 통해 쿠버네티스를 로컬에서 임의로 실행하여 쿠버네티스를 배울 수 있다. 실무에서 쿠버네티스를 사용하면 보통 여러개의 마스터 프로세스와 노드 프로세스가 여러개의 노드에서 실행되는 클러스터를 구성하게 되는데, 이를 로컬에서 세팅하고 테스트하기는 다소 부담스럽다. 미니큐브는 마스터 프로세스와 노드 프로세스를 하나의 노드에서 실행하기 때문에 간편하게 실습이 가능하다.</p>\n<h3 id=\"Kubectl\" style=\"position:relative;\"><a href=\"#Kubectl\" aria-label=\"Kubectl permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a><strong>Kubectl</strong></h3>\n<p>Kubectl 은 쿠버네티스를 다룰 수 있는 명령어 도구로, 쿠버네티스 클러스터 API server 에 요청을 보낼 수 있다. Kubectl 로 API Server 에 다양한 요청(컴포넌트 생성, 수정, 제거 등)을 보내게 되면 워커 프로세스에서 해당 명령어를 실행하게 된다.</p>\n<p> </p>\n<h3 id=\"Minikube-설치\" style=\"position:relative;\"><a href=\"#Minikube-%EC%84%A4%EC%B9%98\" aria-label=\"Minikube 설치 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a><strong>Minikube 설치</strong></h3>\n<p><code class=\"language-text\">brew install minikube</code> 명령어로 kubectl 까지 모두 설치 가능하다. 설치시 링크 에러가 발생하여 공식 홈페이지에 나와있는대로 다시 unlink-link 해줬다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">brew unlink minikube\nbrew <span class=\"token function\">link</span> minikube</code></pre></div>\n<p>이번에는 brew 에서 m1 프로세서에 맞지 않는 버전을 설치했다고 해서(...) 최신 버전 arm 파일을 직접 다운로드 받아 설치해줬다. </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-LO</span> https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-arm64\n<span class=\"token function\">sudo</span> <span class=\"token function\">install</span> minikube-darwin-arm64 /usr/local/bin/minikube</code></pre></div>\n<p> </p>\n<h3 id=\"Minikube-시작\" style=\"position:relative;\"><a href=\"#Minikube-%EC%8B%9C%EC%9E%91\" aria-label=\"Minikube 시작 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a><strong>Minikube 시작</strong></h3>\n<p><code class=\"language-text\">minikube start --driver=docker</code> 로 미니큐브를 도커에 띄운다.</p>\n<p>파드를 생성하기 위해서는 deployment 를 생성해야 하는데, deployment 가 파드를 관리하는 상위 리소스이기 때문이다. 예시로 nginx 를 이미지로 지정하여 deployment 를 생성한다.</p>\n<p><code class=\"language-text\">kubectl create deployment nginx-depl --image=nginx</code></p>\n<p>deployment 를 생성할 때 쿠버네티스에서 자동으로 replicaset(레플리카셋)을 생성하게 되는데, 레플리카셋은 정의된 수의 파드를 생성하여 deployment 가 요청한 상태를 유지하게 된다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 511px; '>\n      <a class='gatsby-resp-image-link' href='/static/3f4fcda7c646b768ea9d8a2f70e9092f/40f84/img1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 10.588235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAg0lEQVR42h2M0Q5DMABF/ZXwoKKoVWlVF8ySbcnY/3/BWePh5N6ch5NM3uOCoVICdVMYM6K1Jssy0jS9qKSk7w2iKGjaljaS5zld1zEM4+XKskTKmuQ4f6zLhrNTjA2EcGeeA9Y5HvszOoNz0/WFELzeH77HiYox72dGa6nrBht3WTf+PHdLWzWE8noAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='원본 pod' title='' src='/static/3f4fcda7c646b768ea9d8a2f70e9092f/40f84/img1.png' srcset='/static/3f4fcda7c646b768ea9d8a2f70e9092f/e7570/img1.png 170w,\n/static/3f4fcda7c646b768ea9d8a2f70e9092f/f46e7/img1.png 340w,\n/static/3f4fcda7c646b768ea9d8a2f70e9092f/40f84/img1.png 511w' sizes='(max-width: 511px) 100vw, 511px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>원본 pod</figcaption>\n  </figure>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; '>\n      <a class='gatsby-resp-image-link' href='/static/6b2c1eb85dcd83de19efd491230f99fc/06341/img2.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 10.588235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAfUlEQVR42h2MTQ7CIBhEey0gQIIJAcpPadGvuFEX6v1PMAqLl0xmMm+p+47SIi5ewweHEFbkXLDVCjo7Us7w3kNKOfuxK6WQUoIxZqK0BmMMQggs788XRB1bqYgxobXrxDkHay2Oo2H9S8aR6JzCkW9EU9z7HY/nC5zzKfwBjwhK99lYee4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='replicaset pod' title='' src='/static/6b2c1eb85dcd83de19efd491230f99fc/06341/img2.png' srcset='/static/6b2c1eb85dcd83de19efd491230f99fc/e7570/img2.png 170w,\n/static/6b2c1eb85dcd83de19efd491230f99fc/f46e7/img2.png 340w,\n/static/6b2c1eb85dcd83de19efd491230f99fc/06341/img2.png 512w' sizes='(max-width: 512px) 100vw, 512px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>replicaset pod</figcaption>\n  </figure></p>\n<p>각각의 파드 이름을 확인해보면 이름이 조금 다름을 알 수 있다.</p>\n<p> </p>\n<p>정리하자면, 쿠버네티스는 다음과 같은 추상 레이어를 가진다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 620px; '>\n      <a class='gatsby-resp-image-link' href='/static/eb2a51220012262e11c31535f83bf93c/abf7b/img3.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 84.11764705882354%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACGUlEQVR42pVUa2+bQBDk//+zNkqrqLVpYkxt2TLYvOGAe3BMdw/bJXasKB9Ge3s3O/fYAU8qo7SxUHq4gzYTlDFXuPxDrgVreY8IjCIZkMUUT6NDfrRuTqnHNd6jBUlF8c5i8TPFy9MBv55j+C85jjvr1r4sqLRFGlnsQ0XoCdKB53jtS4Jdr9CIHlXdIY5zaD06JEmJLK8hWuk4nwpKjvS4aVZOyEsSFddHr5oWSVYgSac1PVj06lx3K6gJxkwIghDWjg5m5gAWxQgoqRGGG7eutbk/IYs1PTWhsjg1IxbhycWoGlB30zqDxxFxDqXBcpMiEUBUWjRnzn9BOlXeWixjg2/+ET+CDE+vJ/hkmVScBYmTCYvfB43vxHlepcRJ4B+pVkw3k3PBoh2wTixWkcRyJ/AW9Qgoz2eCPOa5N+L4e+LE0tVwrZ4LXnzXyoEeeURW1Oipq5zPPdefOYKeJysaSAOIG86HtlkFfx/6jBvTdpKasoUZRv7c7pvCk0ySSpO/NDabnfNZT92c5idvlmQh9mdON1ivt6ibjvIORdlchb3pKsYVJGnhBCy545ILypkj2t4hJR/yRuQYx2G/1uRPHrPouxOyiTlyARM456+CT8hiZSXodJUT4Jwjn7Yoa9flgZ7Ac78dJ6qdMIMFL1fg8XxT3ojjZcxg4e0+wp/XEB4RO37cxz+J9w25BW+420fjwl9h6QfdPzykJKH3cmv5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='출처: spacelift.io' title='' src='/static/eb2a51220012262e11c31535f83bf93c/abf7b/img3.png' srcset='/static/eb2a51220012262e11c31535f83bf93c/e7570/img3.png 170w,\n/static/eb2a51220012262e11c31535f83bf93c/f46e7/img3.png 340w,\n/static/eb2a51220012262e11c31535f83bf93c/abf7b/img3.png 620w' sizes='(max-width: 620px) 100vw, 620px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>출처: spacelift.io</figcaption>\n  </figure></p>\n<ol>\n<li><code class=\"language-text\">deployment</code> 는 더 하위 수준의 replicaset 객체가 특정 수의 pod 를 실행하고 유지하도록 replicaset 을 생성하거나 관리한다.</li>\n<li><code class=\"language-text\">replicaset</code> 은 deployment 에 의해 제어되며 더 하위 수준의 파드를 관리한다. 파드의 복제본 수를 유지하는 역할을 담당하며, 파드의 생성, 삭제를 관리한다.</li>\n<li><code class=\"language-text\">pod</code> 는 쿠버네티스에서 실행 가능한 애플리케이션의 기본 단위로, replicaset 이 생성하고 관리한다.</li>\n</ol>\n<p> </p>\n<p>deployment 하위의 객체들은 쿠버네티스에서 관리하기 때문에 신경쓰지 않아도 된다. 만약 수정하고 싶은 부분이 있다면, configuration 수정을 통해 변경 가능하다.</p>\n<p><code class=\"language-text\">kubectl edit deployment nginx-depl</code> 명령어를 통해 자동 생성된 configuration 파일에 접근할 수 있다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/4edb8aa533cbe83b192fdde2524983ea/fe486/img4.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABLUlEQVR42o1S7XKCMBDkqVqBoAGS8JGQEAXUitXpj77/G2yvwbHTjp3xx87eZS6bvZ1EpchRjx7VuIUaPNSuRz1t6Yz6nUM19FDeQvoOwhmUXQvZG0jXhTuFbrApS3AlsS5yRELmkDTE2xplU0MQcyXAJaFSNFwgTRKkaRrAGAtI2a3PqM8ysHUW6kg1Evb9CDsM2I8TdNNi9fKKeLW6c5L+CP5CeChZ+FZHQnDotwH2MkNaE2xzWuHbGRe0SkG83jwWfICoVpwy6mA/r9DzgXLxMNbC2x7OefiuR1uo/13+FWzrPITfHSZYQ0FXFeI4BkuWldiTzu6CusmDq+3HBafrFaf5DJ5tECfxgnjB04IVrSzpO/j5iPE8Y5z2mPwArTVagnMOxpgl/CcEvwBZpBxoI1fdWQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img4' title='' src='/static/4edb8aa533cbe83b192fdde2524983ea/ca1dc/img4.png' srcset='/static/4edb8aa533cbe83b192fdde2524983ea/e7570/img4.png 170w,\n/static/4edb8aa533cbe83b192fdde2524983ea/f46e7/img4.png 340w,\n/static/4edb8aa533cbe83b192fdde2524983ea/ca1dc/img4.png 680w,\n/static/4edb8aa533cbe83b192fdde2524983ea/fe486/img4.png 768w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>수정하고 싶은 부분을 수정한 후, 저장해주면 자동으로 파드에 변경이 이루어진다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/9ed4c0755347df4da463e94fda14ce6b/6d370/img5.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 11.76470588235294%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAg0lEQVR42h2NTQ+CMBiD+Ve7yD4iZGxDh9PNRGSwRPCi/v9bJe/hSdOmaavnNMGHExp9hLEWru8hhCA45wjhSrnpDFK6U8YYI5RSiDFhGC5o2hZn71Gt2xs5l50ZeV6w7X4pBa91g9Yaj3GElBK3GPH5/mjAOUfH1ti90+FQ16QxJfwB3BFMu5TGljEAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img5' title='' src='/static/9ed4c0755347df4da463e94fda14ce6b/6d370/img5.png' srcset='/static/9ed4c0755347df4da463e94fda14ce6b/e7570/img5.png 170w,\n/static/9ed4c0755347df4da463e94fda14ce6b/f46e7/img5.png 340w,\n/static/9ed4c0755347df4da463e94fda14ce6b/6d370/img5.png 590w' sizes='(max-width: 590px) 100vw, 590px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>변경이 적용된 파드가 생성되고 있음을 알 수 있다.</p>\n<p> </p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 481px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/971df38c5dc8f006ecf273574cfef771/213b2/img6.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 14.705882352941178%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtklEQVR42j2Oy3KCQAAE+SiIxTvULm5gQXywIiRG0HhU///Uwh5y65qamWrn0O0oGsG6EGy3O3RVYY4dxhiG4RutK4qiJIoilPqirmvSNEUIQam1zaXMSZKEIAhwfi+jLZalnssbmqaxx1JKO+6Hgf3+wGeW8XM+c+p7spnb1tB1J+I45vZ3J8/X+L6PM01XpuuNyzix8OP5smaLxXIahiGe5/1bua5rTZRSrFYflsd5d5zPF8M3d0BwsePuY2wAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img6' title='' src='/static/971df38c5dc8f006ecf273574cfef771/213b2/img6.png' srcset='/static/971df38c5dc8f006ecf273574cfef771/e7570/img6.png 170w,\n/static/971df38c5dc8f006ecf273574cfef771/f46e7/img6.png 340w,\n/static/971df38c5dc8f006ecf273574cfef771/213b2/img6.png 481w' sizes='(max-width: 481px) 100vw, 481px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>레플리카셋을 확인해보면, 이전에 생성됐었던 객체에는 더이상 파드가 존재하지 않고, 새로 생성된 파드만 있음을 알 수 있다.</p>\n<p> </p>\n<p><code class=\"language-text\">kubectl exec -it nginx-depl-9785678-knqp8 -- bin/bash</code> 을 통해 특정 파드에 접속할 수 있다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/d7ae5a146e5fdb7ac1efebcf1e2c9bbd/034aa/img7.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 10%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAeElEQVR42h2NUQ6DIBBEvRfgXyk0slBWBGyNev9DTOl+vMxmkjc7cWH0o2JrG9a1oPcdn++B675xnpd0mRkPa8GZ4f0LxhgopST/zLOB1lqYWttRShWRKIrsnEdtTWTnHJ4DOwYpRqT0FuK4l0AIRIgpIY9nYQn4AS7lTFJiKVNlAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img7' title='' src='/static/d7ae5a146e5fdb7ac1efebcf1e2c9bbd/ca1dc/img7.png' srcset='/static/d7ae5a146e5fdb7ac1efebcf1e2c9bbd/e7570/img7.png 170w,\n/static/d7ae5a146e5fdb7ac1efebcf1e2c9bbd/f46e7/img7.png 340w,\n/static/d7ae5a146e5fdb7ac1efebcf1e2c9bbd/ca1dc/img7.png 680w,\n/static/d7ae5a146e5fdb7ac1efebcf1e2c9bbd/034aa/img7.png 717w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>셸에 접속 후, 명령어를 실행하거나 필요한 파일을 확인할 수 있다.</p>\n<p> </p>\n<h3 id=\"configuration-file\" style=\"position:relative;\"><a href=\"#configuration-file\" aria-label=\"configuration file permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a><strong>configuration file</strong></h3>\n<p>위에서 <code class=\"language-text\">kubectl create</code> 명령어로 리소스를 생성했지만, 다양한 옵션을 추가해야 한다면 cli 로 모든 옵션을 추가하기는 어렵다. 일반적으로 쿠버네티스 리소스 정의에는 yaml 형식의 configuration 파일이 사용된다. 해당 파일 정의 후 apply 해주면 필요한 리소스를 생성 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>deployment\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">:</span>latest\n          <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code></pre></div>\n<p>configuration 파일은 몇가지 부분으로 나뉜다.</p>\n<ol>\n<li>metadata: 이름 등이 정의된다.</li>\n<li>specification: 리소스를 구성하고 설정하는 부분으로, 해당 리소스가 어떻게 동작해야 하는지에 대한 정보를 담고 있다.</li>\n<li>status: 리소스의 현재 상태를 나타내는 부분으로, 파일 작성 시는 존재하지 않으며, apply 시 쿠버네티스가 자동 생성한다. 쿠버네티스는 status 의 내용을 지속적으로 갱신하는데, status 와 정의된 내용을 비교하여 일치하지 않는다면 리소스의 상태를 정의된 내용에 일치하도록 수정하게 된다. 이때 활용되는 status 데이터는 클러스터의 뇌와 같은 역할을 하는 etcd 에 저장된다.</li>\n</ol>","frontmatter":{"title":"[WIP] 데모 프로젝트를 통해 Kubernetes 이해하기","date":"January 06, 2025","update":"January 06, 2025","tags":["Infrastructure","Kubernetes"],"series":null},"fields":{"slug":"/kubernetes-demo/","readingTime":{"minutes":6.575}}},"seriesList":{"edges":[{"node":{"id":"df9dfe4a-14ef-52df-8f36-06d199c90656","fields":{"slug":"/understanding-jvm/"},"frontmatter":{"title":"JVM 이해하기"}}},{"node":{"id":"d078781e-ce36-55d1-af07-598e0b000d92","fields":{"slug":"/leetcode-3sum/"},"frontmatter":{"title":"leetcode 15. 3Sum"}}},{"node":{"id":"e551e659-5a38-5541-91a6-c8ff96915d0d","fields":{"slug":"/blog-migration/"},"frontmatter":{"title":"블로그 옮기기"}}},{"node":{"id":"356ea60d-b20c-5ad8-92ea-413c2fdb3a81","fields":{"slug":"/gatsby-version-ps/"},"frontmatter":{"title":"종속성 문제 해결하기"}}},{"node":{"id":"96b29891-a242-5bbf-9728-56799a9f3cc1","fields":{"slug":"/minimum-spanning-tree/"},"frontmatter":{"title":"최소비용 신장 트리 (Minimum Spanning Tree)"}}},{"node":{"id":"3bdccf81-ee85-54e6-a829-ec21f0fcba6e","fields":{"slug":"/custom-repository/"},"frontmatter":{"title":"Custom repository 적용하기 (feat. Sequelize, TypeORM)"}}},{"node":{"id":"4f6f3366-663a-50df-aae8-f021f6b50c10","fields":{"slug":"/asynchronous-programming/"},"frontmatter":{"title":"비동기 프로그래밍"}}},{"node":{"id":"1040970d-b85f-527c-8ffa-b8a426e61197","fields":{"slug":"/boj-1181/"},"frontmatter":{"title":"input() vs sys.stdin.readline()"}}},{"node":{"id":"f7881a3e-b687-5510-8bfd-450faae1b187","fields":{"slug":"/boj-18110/"},"frontmatter":{"title":"python round() 와 반올림"}}},{"node":{"id":"e515c0a9-2a33-552f-901e-bd8b61db7c74","fields":{"slug":"/spring-container/"},"frontmatter":{"title":"스프링 컨테이너와 빈"}}},{"node":{"id":"54e07400-3ae1-5858-9c8e-4e98d0deb327","fields":{"slug":"/localstack-testing/"},"frontmatter":{"title":"Localstack 으로 DynamoDB + Lambda testing 해보기"}}},{"node":{"id":"4c97f39d-ad6a-5f1b-8e31-93d6a9853a86","fields":{"slug":"/what-is-index/"},"frontmatter":{"title":"인덱스 (Index)"}}},{"node":{"id":"6c7057c7-a535-51a9-9c95-3d394ec0c167","fields":{"slug":"/understanding-kubernetes/"},"frontmatter":{"title":"Kubernetes 구성 요소 이해하기"}}},{"node":{"id":"01847e81-6882-5ff3-adde-2106c08e04e8","fields":{"slug":"/kubernetes-demo/"},"frontmatter":{"title":"[WIP] 데모 프로젝트를 통해 Kubernetes 이해하기"}}}]},"previous":{"fields":{"slug":"/understanding-kubernetes/"},"frontmatter":{"title":"Kubernetes 구성 요소 이해하기"}},"next":null},"pageContext":{"id":"01847e81-6882-5ff3-adde-2106c08e04e8","series":null,"previousPostId":"6c7057c7-a535-51a9-9c95-3d394ec0c167","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}