{"componentChunkName":"component---src-templates-post-jsx","path":"/quick-youtube-search-2/","result":{"data":{"site":{"siteMetadata":{"title":"gyuwseong"}},"markdownRemark":{"id":"707c1b73-58ca-5d62-be1c-7c1588c1925d","excerpt":"몇 달 전에 개인 사용 용도로 크롬 확장 프로그램을 만든 이후로 요긴하게 잘 사용해 왔다. 최근에 공부에 쏟는 시간이 늘어나면서 특정 문서를 읽다가 해당 내용을 유튜브 검색을 통해 딥다이브 하게 되는 일이 잦아졌는데, 검색어를 복사하고 붙이는 과정 없이 바로 유튜브로 해당 검색어의 결과 페이지가 열리면 좋겠다고 생각했다. 아마도 간단한 작업일 것이라고 생…","html":"<p> </p>\n<p>몇 달 전에 개인 사용 용도로 크롬 확장 프로그램을 만든 이후로 요긴하게 잘 사용해 왔다. 최근에 공부에 쏟는 시간이 늘어나면서 특정 문서를 읽다가 해당 내용을 유튜브 검색을 통해 딥다이브 하게 되는 일이 잦아졌는데, 검색어를 복사하고 붙이는 과정 없이 바로 유튜브로 해당 검색어의 결과 페이지가 열리면 좋겠다고 생각했다. 아마도 간단한 작업일 것이라고 생각해서 필요성을 느끼고 얼마 지나지 않아 기능을 추가하게 되었다.</p>\n<p> </p>\n<h2 id=\"개발-과정\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EB%B0%9C-%EA%B3%BC%EC%A0%95\" aria-label=\"개발 과정 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a><em><strong>개발 과정</strong></em></h2>\n<h3 id=\"manifestjson\" style=\"position:relative;\"><a href=\"#manifestjson\" aria-label=\"manifestjson permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a><em><strong>manifest.json</strong></em></h3>\n<p>내가 원하는 기능은 검색어 드래그 후 오른쪽 클릭을 통해 메뉴를 열고, 검색을 진행하는 것이었기에 오른쪽 클릭 시 열리는 메뉴를 먼저 추가해야 했다. 해당 기능은 <a href=\"https://developer.chrome.com/docs/extensions/develop/ui/context-menu\">contextMenus</a> 라는 기능으로, <code class=\"language-text\">contextMenus</code> 를 추가하려면 가장 먼저 <code class=\"language-text\">manifest.json</code> 파일에 권한을 추가해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"permissions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"contextMenus\"</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"icons\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"16\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"icon.png\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>메뉴에 아이콘도 함께 보여주기 위해서 기존에 사용했던 아이콘도 함께 넣어주었다. 메뉴에 사용되는 아이콘의 크기는 16*16 이다.</p>\n<p>그다음에 설정해 줘야 하는 건 서비스 워커이다.</p>\n<p> </p>\n<h3 id=\"service-worker\" style=\"position:relative;\"><a href=\"#service-worker\" aria-label=\"service worker permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a><em><strong>service worker</strong></em></h3>\n<p>서비스 워커는 브라우저 확장 프로그램의 중앙 이벤트 핸들러로, <code class=\"language-text\">contextMenus</code> API 작업의 로직도 처리할 수 있다. 검색어 드래그 후 오른쪽 클릭을 통해 메뉴를 열고 특정 메뉴 항목을 클릭하면 그에 대한 로직을 서비스 워커가 처리하는 식으로 동작한다. <a href=\"https://github.com/GoogleChrome/chrome-extensions-samples/blob/main/api-samples/contextMenus/basic/sample.js\">Google Chrome Github</a> 에서 서비스 워커 로직의 샘플을 확인할 수 있어서 참고했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onInstalled<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    chrome<span class=\"token punctuation\">.</span>contextMenus<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">\"myContextMenu\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Search '%s'\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">contexts</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"selection\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">chrome.runtime.onInstalled.addListener</code> 를 통해 확장 프로그램이 설치 완료되면, <a href=\"https://developer.chrome.com/docs/extensions/reference/api/contextMenus#method-create\">contextMenus.create</a> 로 컨텍스트 메뉴를 생성해준다.</p>\n<p> </p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/efc872723f8043bd619c6b653cb986f7/3f4de/img1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 18.823529411764707%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAk0lEQVR42q1Oyw4CIQzc//9LXSgIlNUY1/By7JaD0bOkk3m0aVn2xw70FyD1j7fctiue6Y5aKlpvaO2DWn907199zdvM+xhzobUW5D0sEUigXtg5p3o1Fs5fcFqNaAMvs0QOq3grfBY2lnTHcWCJIYITg5mRcwYLYozqmTNSSoojy3lDCGHOST/FhFKK/L4qxhh4AzoyNCZn5ujQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img1' title='' src='/static/efc872723f8043bd619c6b653cb986f7/ca1dc/img1.png' srcset='/static/efc872723f8043bd619c6b653cb986f7/e7570/img1.png 170w,\n/static/efc872723f8043bd619c6b653cb986f7/f46e7/img1.png 340w,\n/static/efc872723f8043bd619c6b653cb986f7/ca1dc/img1.png 680w,\n/static/efc872723f8043bd619c6b653cb986f7/3f4de/img1.png 898w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>드래그로 선택된 텍스트에 대해서만 컨텍스트 메뉴가 표시되도록 하기 위해서 <code class=\"language-text\">contexts:[\"selection\"]</code> 를 설정해 주었는데, 이때 선택된 텍스트는 <code class=\"language-text\">%s</code> 를 통해서 가져올 수 있다.</p>\n<p> </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">chrome<span class=\"token punctuation\">.</span>contextMenus<span class=\"token punctuation\">.</span>onClicked<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">info</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> selectedText <span class=\"token operator\">=</span> info<span class=\"token punctuation\">.</span>selectionText<span class=\"token punctuation\">;</span>\n    chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">www.example=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">encodeURIComponent</span><span class=\"token punctuation\">(</span>selectedText<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">chrome.contextMenus.onClicked.addListener</code> 를 통해 메뉴 항목이 클릭되면 이벤트를 발생시키게 되는데, 이때 선택한 info 즉 <a href=\"https://developer.chrome.com/docs/extensions/reference/api/contextMenus#type-OnClickData\">OnClickData</a> 의 <code class=\"language-text\">selectionText</code> 로 선택된 텍스트를 가져와 필요한 처리를 해주게 된다.</p>\n<p> </p>\n<p> </p>\n<p>간단한 작업을 통해 필요한 기능을 성공적으로 추가 완료했다. 로직 파일이 두 개로 늘어났기 때문에 추후 ts 로 코드 변경을 진행하고, 유튜브 API 를 통해 검색어 자동완성 기능도 추가하면서 작은 확장 프로그램이지만 조금 더 좋은 사용성을 가질 수 있도록 지속적으로 개발할 예정이다.</p>","frontmatter":{"title":"확장 프로그램에 기능 추가하기","date":"November 11, 2024","update":"November 11, 2024","tags":["조각글"],"series":"확장 프로그램 개발 일기"},"fields":{"slug":"/quick-youtube-search-2/","readingTime":{"minutes":3.895}}},"seriesList":{"edges":[{"node":{"id":"913126a1-04ee-5720-a45b-83c532ccb8eb","fields":{"slug":"/quick-youtube-search/"},"frontmatter":{"title":"작고 귀여운 크롬 확장 프로그램 만들기"}}},{"node":{"id":"707c1b73-58ca-5d62-be1c-7c1588c1925d","fields":{"slug":"/quick-youtube-search-2/"},"frontmatter":{"title":"확장 프로그램에 기능 추가하기"}}}]},"previous":{"fields":{"slug":"/what-is-index/"},"frontmatter":{"title":"인덱스 (Index)"}},"next":null},"pageContext":{"id":"707c1b73-58ca-5d62-be1c-7c1588c1925d","series":"확장 프로그램 개발 일기","previousPostId":"4c97f39d-ad6a-5f1b-8e31-93d6a9853a86","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}